{% extends "admin/base.html" %}

{% block title %}جزئیات رزرو #{{ booking.id }}{% endblock %}
{% block page_title %}جزئیات رزرو{% endblock %}

{% block breadcrumb %}
{{ block.super }}
<li class="breadcrumb-item"><a href="{% url 'accounts:dashboard' %}">رزروها</a></li>
<li class="breadcrumb-item active">جزئیات #{{ booking.id }}</li>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>اطلاعات رزرو</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>شماره رزرو:</strong> #{{ booking.id }}</p>
                        <p><strong>وضعیت:</strong> 
                            <span class="badge bg-{{ booking.status_color }}">
                                {{ booking.get_status_display }}
                            </span>
                        </p>
                        <p><strong>تاریخ ایجاد:</strong> {{ booking.created_at|date:"Y/m/d H:i" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>تاریخ ورود:</strong> {{ booking.check_in|date:"Y/m/d" }}</p>
                        <p><strong>تاریخ خروج:</strong> {{ booking.check_out|date:"Y/m/d" }}</p>
                        <p><strong>تعداد شب:</strong> {{ booking.nights_count }}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-6">
                        <h6>اطلاعات مهمان</h6>
                        <p><strong>نام:</strong> {{ booking.guest.name }}</p>
                        <p><strong>تلفن:</strong> {{ booking.guest.phone }}</p>
                        <p><strong>ایمیل:</strong> {{ booking.guest.email|default:"-" }}</p>
                    </div>
                    <div class="col-md-6">
                        <h6>اطلاعات اتاق</h6>
                        <p><strong>شماره اتاق:</strong> {{ booking.room.number }}</p>
                        <p><strong>نوع اتاق:</strong> {{ booking.room.type.name }}</p>
                        <p><strong>قیمت شبانه:</strong> {{ booking.room.type.price }} تومان</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>صورتحساب</h5>
            </div>
            <div class="card-body">
                <table class="table table-sm">
                    <tr>
                        <th>قیمت اتاق</th>
                        <td>{{ booking.room_cost }} تومان</td>
                    </tr>
                    {% for service in booking.services.all %}
                    <tr>
                        <th>خدمات ({{ service.name }})</th>
                        <td>{{ service.price }} تومان</td>
                    </tr>
                    {% endfor %}
                    <tr class="table-active">
                        <th>جمع کل</th>
                        <td>{{ booking.total_cost }} تومان</td>
                    </tr>
                </table>
                <div class="d-grid gap-2">
                    <button class="btn btn-success">تسویه حساب</button>
                    <a href="{% url 'accounts:dashboard' %}" class="btn btn-warning">ویرایش رزرو</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}